language: groovy
before_install:
 - chmod +x ./gradlew
# - wget https://github.com/sormuras/bach/raw/master/install-jdk.sh && chmod +x ./install-jdk.sh
 - chmod +x ./install-jdk.sh
 - chmod +x ./.travis.default-compile.sh
 - chmod +x ./.travis.default-test.sh
 - chmod +x ./.travis.openjdk9-install.sh
 - chmod +x ./.travis.openjdk10-install.sh
 - chmod +x ./.travis.openjdk11-install.sh
 - chmod +x ./.travis.oraclejdk10-install.sh
 - chmod +x ./.travis.oraclejdk11-install.sh
before_script:
 - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
 - chmod +x ./cc-test-reporter
 - ./cc-test-reporter before-build
after_script:
 - ./gradlew test jacocoTestReport
 - JACOCO_SOURCE_PATH=foundation/src/main/java ./cc-test-reporter format-coverage ./foundation/build/reports/jacoco/test/jacocoTestReport.xml --input-type jacoco
 - ./cc-test-reporter upload-coverage -r $CC_TEST_REPORTER_ID
branches:
  only:
    - master
    - develop
env:
  global:
    - TRAVIS_ENV=true
    - CC_TEST_REPORTER_ID=74d896271eff9cb06c082ae893e2607c644abe5671ed1650b553cb675853151a
jdk:
  - openjdk8
  - oraclejdk8
matrix:
  include:
    - env: TEST_DUMMY_INFO="compile:openjdk8,   test:openjdk8"
      script: jdk_switcher use openjdk8 && ./.travis.default-compile.sh && jdk_switcher use openjdk8 && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:oraclejdk8, test:openjdk8"
      script: jdk_switcher use oraclejdk8 && ./.travis.default-compile.sh && jdk_switcher use openjdk8 && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:openjdk8,   test:openjdk9"
      script: jdk_switcher use openjdk8 && ./.travis.default-compile.sh && ./.travis.openjdk9-install.sh && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:oraclejdk8, test:openjdk9"
      script: jdk_switcher use oraclejdk8 && ./.travis.default-compile.sh && ./.travis.openjdk9-install.sh && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:openjdk8,   test:openjdk10"
      script: jdk_switcher use openjdk8 && ./.travis.default-compile.sh && ./.travis.openjdk10-install.sh && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:oraclejdk8, test:openjdk10"
      script: jdk_switcher use oraclejdk8 && ./.travis.default-compile.sh && ./.travis.openjdk10-install.sh && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:openjdk8,   test:openjdk11"
      script: jdk_switcher use openjdk8 && ./.travis.default-compile.sh && ./.travis.openjdk11-install.sh && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:oraclejdk8, test:openjdk11"
      script: jdk_switcher use oraclejdk8 && ./.travis.default-compile.sh && ./.travis.openjdk11-install.sh && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:openjdk8,   test:oraclejdk8"
      script: jdk_switcher use openjdk8 && ./.travis.default-compile.sh && jdk_switcher use oraclejdk8 && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:oraclejdk8, test:oraclejdk8"
      script: jdk_switcher use oraclejdk8 && ./.travis.default-compile.sh && jdk_switcher use oraclejdk8 && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:openjdk8,   test:oraclejdk11"
      script: jdk_switcher use openjdk8 && ./.travis.default-compile.sh && ./.travis.oraclejdk11-install.sh && ./.travis.default-test.sh
    - env: TEST_DUMMY_INFO="compile:oraclejdk8, test:oraclejdk11"
      script: jdk_switcher use oraclejdk8 && ./.travis.default-compile.sh && ./.travis.oraclejdk11-install.sh && ./.travis.default-test.sh

